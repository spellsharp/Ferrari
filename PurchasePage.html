<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Checkout Form</title>
    <!-- Add the Bootstrap CSS link -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <style>
      /* Custom dark mode */
      body {
        background: linear-gradient(
          118deg,
          #000 0%,
          rgba(255, 0, 0, 1) 68.92%,
          rgba(0, 0, 0, 1) 100%
        );
        color: #fff;
        height: 100vh;
        margin: 0;
        padding: 0;
      }

      

      .rounded-btn {
        border-radius: 25px;
      }

      /* Remove border from input fields */
      .form-control.no-border {
        border: none;
      }

      /* Apply custom styles for focus state (optional) */
      .form-control.no-border:focus {
        box-shadow: none;
      }

      .dark-mode .form-control,
      .dark-mode .form-control:focus {
        background-color: #333;
        color: #fff;
      }

      /* Custom styles for buttons */
      .btn-left,
      .btn-right {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 1;
      }

      .btn-left {
        left: 0;
      }

      .btn-right {
        right: 0;
      }

      .card-payment {
        font-size: 18px;
        font-weight: bold;
      }
      .breakline {
        border-top: 3px solid white;
      }
      .form1 {
        background: #131313;
      }
      .purchasebtn {
        border-radius: 24px;
        background: linear-gradient(135deg, #f00 0%, rgba(255, 0, 0, 0) 100%);
      }
      .formfont {
        color: #7f7f7f;
        font-size: 12.42px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
      }
      .total {
        width: 73.334px;
        height: 19.422px;
        flex-shrink: 0;
        color: #fff;

        font-size: 12.42px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
      }
    </style>
  </head>
  <body class="dark-mode">
    <div class="ml-5 mt-5">
      <div class="row m-0">
        <div class="col-md-6 form1 mb-auto" style="border-radius: 20px;">
          <div class="col-md-12 ml-3">
            <form class="p-4">
              <div class="pt-3 pb-4">
                <h4>Your Details</h4>
              </div>
              <div class="form-row">
                <div class="col-md-5 mb-3">
                  <label for="first-name">First Name</label>
                  <input
                    type="text"
                    class="form-control no-border"
                    id="first-name"
                    name="first-name"
                    placeholder="eg. John"
                    style="background: rgba(0, 0, 0, 0.5); padding: 30px"
                    required
                  />
                </div>
                <div class="col-md-1"></div>
                <div class="col-md-5 mb-3">
                  <label for="last-name">Last Name</label>
                  <input
                    type="text"
                    class="form-control no-border"
                    style="background: rgba(0, 0, 0, 0.5); padding: 30px"
                    id="last-name"
                    name="last-name"
                    placeholder="Doe"
                    required
                  />
                </div>
              </div>
              <div class="form-row">
                <div class="col-md-5 mb-3">
                  <label for="email">Email Address</label>
                  <input
                    type="email"
                    class="form-control no-border"
                    style="background: rgba(0, 0, 0, 0.5); padding: 30px"
                    id="email"
                    name="email"
                    placeholder="name@company.com"
                    required
                  />
                </div>
                <div class="col-md-1"></div>
                <div class="col-md-5 mb-3">
                  <label for="phone">Phone Number</label>
                  <input
                    type="tel"
                    class="form-control no-border"
                    id="phone"
                    name="phone"
                    style="background: rgba(0, 0, 0, 0.5); padding: 30px"
                    placeholder="+91 9876543210"
                    required
                  />
                </div>
              </div>
              <div class="form-group">
                <label for="shipping-address">Shipping Address</label>
                <textarea
                  id="shipping-address"
                  name="shipping-address"
                  class="form-control col-md-11 no-border"
                  style="height: 127px; background: rgba(0, 0, 0, 0.5); padding: 30px"
                  placeholder="Enter shipping address here..."
                  required
                ></textarea>
              </div>
              <div class="form-group position-relative py-5">
                <div class="row">
                  <div class="col-md-4"></div>
                  <div class="col-md-3">
                    <button
                      type="button"
                      style="outline: none; border: none"
                      class="purchasebtn p-2 btn-block rounded-btn btn-left"
                      onclick="confirmPurchase()"
                    >
                      <p class="p-0 m-0" style="color: #fff">
                        Confirm Purchase
                      </p>
                    </button>
                  </div>
                  <div class="col-md-1"></div>
                  <div class="col-md-3">
                    <button
                      type="submit"
                      style="outline: none; border: none"
                      class="p-2 btn-secondary btn-block rounded-btn btn-right"
                      onclick="cancelPurchase()"
                    >
                      Cancel Purchase
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
        <div class="col-md-4">
          <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-11 form1 p-5"  style="border-radius: 20px;">
              <div class="text-white">
                <div class="card-header">
                  <h4>Payment Details</h4>
                </div>
                <div style="background: #000">
                  <div class="card-body card-payment">
                    <div class="form-group row">
                      <label
                        for="total-amount"
                        class="formfont col-sm-6 col-form-label"
                        >Total Amount:</label
                      >
                      <div class="col-sm-6">
                        <input
                          type="number"
                          id="total-amount"
                          class="form-control border-0 bg-transparent"
                          min="0"
                          value="100"
                          readonly
                        />
                      </div>
                    </div>
                    <div class="form-group row">
                      <label
                        for="shipping-fee"
                        class="formfont col-sm-6 col-form-label"
                        >Shipping Fee:</label
                      >
                      <div class="col-sm-6">
                        <input
                          type="number"
                          id="shipping-fee"
                          class="form-control border-0 bg-transparent"
                          min="0"
                          value="10"
                          readonly
                        />
                      </div>
                    </div>
                    <div class="form-group row">
                      <label
                        for="taxes"
                        class="col-sm-6 col-form-label formfont"
                        >Taxes:</label
                      >
                      <div class="col-sm-6">
                        <input
                          type="number"
                          id="taxes"
                          class="form-control border-0 bg-transparent"
                          min="0"
                          value="5"
                          readonly
                        />
                      </div>
                    </div>
                  </div>
                </div>
                <div class="mt-4 pt-0" style="background: #000">
                  <div class="px-3 py-1 card-payment">
                    <div class="pt-4">
                      <div class="form-group row">
                        <label
                          for="total"
                          class="col-sm-6 col-form-label formfont total"
                          >TOTAL:</label
                        >
                        <div class="col-sm-6">
                          <input
                            type="number"
                            id="total"
                            class="form-control border-0 bg-transparent"
                            min="0"
                            value="115"
                            readonly
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-11 mt-4 px-0 mx-auto">
                  <div style="background: #000;" class="text-white">
                    <div class="card-header">
                      <h4>Card Payment</h4>
                    </div>
                    <div class="card-body">
                      <div class="form-group">
                        <label>Card Type:</label>
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="cardType"
                            id="visa"
                            value="visa"
                            checked
                          />
                          <label class="form-check-label" for="visa">
                            <div class="card-logo visa"></div>
                            Visa
                          </label>
                        </div>
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="cardType"
                            id="mastercard"
                            value="mastercard"
                          />
                          <label class="form-check-label" for="mastercard">
                            <div class="card-logo mastercard"></div>
                            Mastercard
                          </label>
                        </div>
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="cardType"
                            id="americanexpress"
                            value="americanexpress"
                          />
                          <label class="form-check-label" for="americanexpress">
                            <div class="card-logo american-express"></div>
                            American Express
                          </label>
                        </div>
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="cardType"
                            id="discover"
                            value="discover"
                          />
                          <label class="form-check-label" for="discover">
                            <div class="card-logo discover"></div>
                            Discover
                          </label>
                        </div>
                      </div>
                      <div class="form-row">
                        <div class="col-md-6 mb-3">
                          <label for="cardNumber">Card Number:</label>
                          <input
                            type="text"
                            class="form-control no-border bg-transparent mb-0 pb-0"
                            id="cardNumber"
                            name="cardNumber"
                            placeholder="Card Number"
                            required
                          />
                          <hr class="mt-1" style="background: #c4c4c4" />
                        </div>
                        <div class="col-md-6 mb-3">
                          <label for="cardHolderName">Card Holder Name:</label>
                          <input
                            type="text"
                            class="form-control border-0 bg-transparent mb-0 pb-0"
                            id="cardHolderName"
                            name="cardHolderName"
                            placeholder="Name on Card"
                            required
                          />
                          <hr class="mt-1" style="background: #c4c4c4" />
                        </div>
                      </div>
                      <div class="form-row">
                        <div class="col-md-4 mb-3">
                          <label for="expiryDate">Expiry Date:</label>
                          <input
                            type="text"
                            class="form-control no-border bg-transparent mb-0 pb-0"
                            id="expiryDate"
                            name="expiryDate"
                            placeholder="MM/YY"
                            required
                          />
                          <hr class="mt-1" style="background: #c4c4c4" />
                        </div>
                        <div class="col-md-4 mb-3 ml-4">
                          <label for="cvv">CVV:</label>
                          <input
                            type="text"
                            class="form-control no-border bg-transparent mb-0 pb-0"
                            id="cvv"
                            name="cvv"
                            placeholder="XXX"
                            required
                          />
                          <hr class="mt-1" style="background: #c4c4c4" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Add the Bootstrap JS script links -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
      function cancelPurchase() {
        window.location.href = "MerchandisePage.html";
      }
      function luhnCheck(num) {
        let arr = (num + "")
          .split("")
          .reverse()
          .map((x) => parseInt(x));
        let lastDigit = arr.splice(0, 1)[0];
        let sum = arr.reduce(
          (acc, val, i) =>
            i % 2 !== 0 ? acc + val : acc + ((val * 2) % 9) || 9,
          0
        );
        sum += lastDigit;
        return sum % 10 === 0;
      }
      function confirmPurchase() {
        const fname = document.getElementById("first-name").value;
        const lname = document.getElementById("last-name").value;
        const email = document.getElementById("email").value;
        const phone = document.getElementById("phone").value;
        const address = document.getElementById("shipping-address").value;
        const cardno = document.getElementById("cardNumber").value;
        const cardname = document.getElementById("cardHolderName").value;
        const expirydate = document.getElementById("expiryDate").value;
        const cvv = document.getElementById("cvv").value;
        if (
          fname.trim() === "" ||
          lname.trim() === "" ||
          email.trim() === "" ||
          phone.trim() === "" ||
          address.trim() === ""
        ) {
          alert("Please fill in all your personal details.");
        } else if (
          cardno.trim() === "" ||
          cardname.trim() === "" ||
          expirydate.trim() === "" ||
          cvv.trim()
        ) {
          alert("Please fill in all your card details.");
        } else {
          luhnCheck(cardno)
            ? (window.location.href = "success.html")
            : alert("Invalid card number.");
        }
      }
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const totalAmount = urlParams.get("total");

        if (totalAmount) {
          
          document.getElementById("total-amount").value = totalAmount;
          document.getElementById("shipping-fee").value = totalAmount * 0.1;
          document.getElementById("taxes").value = totalAmount * 0.07;
          
          updateTotal();
        }
      });

      
      function updateTotal() {
        const totalAmount = parseFloat(
          document.getElementById("total-amount").value
        );
        const shippingFee = parseFloat(
          document.getElementById("shipping-fee").value
        );
        const taxes = parseFloat(document.getElementById("taxes").value);
        const total = totalAmount + shippingFee + taxes;

        document.getElementById("total").value = total.toFixed(2);
      }
    </script>
  </body>
</html>
